{
    "app-id" : "org.gabmus.whatip",
    "command" : "whatip",
    "runtime" : "org.gnome.Platform",
    "runtime-version" : "3.34",
    "sdk" : "org.gnome.Sdk",
    "finish-args" : [
    	"--device=dri",
        "--share=ipc",
        "--socket=x11",
        "--share=network",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--talk-name=ca.desrt.dconf",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
    ],
    "modules" : [
        {
            "name" : "libhandy",
            "buildsystem" : "meson",
            "config-opts" : [
                "--buildtype=release"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://source.puri.sm/Librem5/libhandy/-/archive/v0.0.12/libhandy-v0.0.12.tar.gz",
                    "sha256" : "87407b6d423042bed897a80b1bf38ec6708d1cb3e0c7283cbcb4a3464ca31b98"
                }
            ]
        },
        {
            "name" : "python-idna",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/kjd/idna/archive/v2.8.tar.gz",
                    "sha256" : "db438aeba52c606cf1dd9671cb746377b4baeaea923397152e91576e8404d87a"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "python-certifi",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/certifi/python-certifi/archive/2019.06.16.tar.gz",
                    "sha256" : "fcbaea367cf3a4e8df94271e13326e1482d492569081bb465862bcb1d2019839"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "python-chardet",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/chardet/chardet/archive/3.0.4.tar.gz",
                    "sha256" : "d5620025cfca430f6c2e28ddbc87c3c66a5c82fa65570ae975c92911c2190189"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "python-urllib3",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/urllib3/urllib3/archive/1.25.3.tar.gz",
                    "sha256" : "fd0376d5a0d8ac633693dcbefc8f4b7acecae81e5aee7c824682cd11b3edb635"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "python-requests",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/psf/requests/archive/v2.22.0.tar.gz",
                    "sha256" : "dcacea1b6a7bfd2cbb6c6a05743606b428f2739f37825e41fbf79af3cc2fd240"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "python-netaddr",
            "buildsystem" : "simple",
            "build-options" : {
                "arch" : {
                    "i386" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    },
                    "arm" : {
                        "env" : {
                            "MAX_CONCURRENCY" : "1"
                        }
                    }
                }
            },
            "ensure-writable" : [
                "/lib/python*/site-packages/easy-install.pth",
                "/lib/python*/site-packages/setuptools.pth",
                "/app/lib/python*/site-packages/easy-install.pth",
                "/app/lib/python*/site-packages/setuptools.pth"
            ],
            "build-commands" : [
                "python3 setup.py install --prefix=/app --root=/"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://files.pythonhosted.org/packages/0c/13/7cbb180b52201c07c796243eeff4c256b053656da5cfe3916c3f5b57b3a0/netaddr-0.7.19.tar.gz",
                    "sha256" : "38aeec7cdd035081d3a4c306394b19d677623bf76fa0913f6695127c7753aefd"
                },
                {
                    "type" : "shell",
                    "commands" : [
                        "sed -i 's/if not platform_/if not dirs/' setup.py"
                    ]
                }
            ]
        },
        {
            "name" : "iproute2",
            "buildsystem" : "simple",
            "build-commands" : [
                "./configure",
                "make",
                "make PREFIX=\"/app\" DESTDIR=\"/app\" SBINDIR=\"/bin\" install"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://mirrors.edge.kernel.org/pub/linux/utils/net/iproute2/iproute2-5.5.0.tar.xz",
                    "sha256" : "bac543435cac208a11db44c9cc8e35aa902befef8750594654ee71941c388f7b"
                }
            ]
        },
        {
            "name" : "iputils",
            "buildsystem" : "meson",
            "config-opts": [
            	"-DUSE_CAP=false",
            	"-DUSE_IDN=false",
            	"-DBUILD_ARPING=false",
            	"-DBUILD_CLOCKDIFF=false",
            	"-DBUILD_RARPD=false",
            	"-DBUILD_RDISC=false",
            	"-DENABLE_RDISC_SERVER=false",
            	"-DBUILD_TFTPD=false",
            	"-DBUILD_TRACEPATH=false",
            	"-DBUILD_TRACEROUTE6=false",
            	"-DBUILD_NINFOD=false",
            	"-DNINFOD_MESSAGES=false",
            	"-DBUILD_MANS=false",
            	"-DBUILD_HTML_MANS=false",
            	"-DNO_SETCAP_OR_SUID=false",
            	"-DSETCAP_OR_SUID_ARPING=false",
            	"-DSETCAP_OR_SUID_CLOCKDIFF=false",
            	"-DSETCAP_OR_SUID_PING=false",
            	"-DSETCAP_OR_SUID_TRACEROUTE6=false",
            	"-DUSE_GETTEXT=false"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://github.com/iputils/iputils/archive/s20190709.tar.gz",
                    "sha256" : "a15720dd741d7538dd2645f9f516d193636ae4300ff7dbc8bfca757bf166490a"
                }
            ]
        },
        {
            "name" : "whatip",
            "buildsystem" : "meson",
            "builddir" : true,
            "config-opts" : [
                "--buildtype=release"
            ],
            "sources" : [
                {
                    "type" : "archive",
                    "url" : "https://gitlab.gnome.org/World/whatip/-/archive/0.1/whatip-0.1.tar.gz",
                    "sha256" : ""
                }
            ]
        }
    ]
}
